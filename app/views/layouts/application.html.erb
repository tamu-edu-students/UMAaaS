<!DOCTYPE html>
<html>
  <head>
    <title>tripAgvisor</title>
    <meta name="turbolinks-cache-control" content="no-cache">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= favicon_link_tag asset_path('rev3.png') %>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700|Yanone+Kaffeesatz:700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
    rel="stylesheet">
  </head>

    <body>
        <nav class="nav">
            <div>&nbsp;</div><div id="logo-wrapper"><%= link_to image_tag("tripagvisor_logo_2.png", class: "logo"), root_path(), :id => "tamu_logo_link", :class => "logo" %></div>
            <!-- Change this -->
              <div class="nav-actions">
                <ul class="navigation">
                  <%if logged_in?%>
                    <%if current_user.admin%>
                      <li><a href="" title="Admin">Admin</a>
                      <ul>
                        <li><%=link_to "Users", users_path(), :id => "users" %></li>
                        <li><%=link_to "Programs", programs_path(), :id => "programs" %></li>
                        <% if controller_name == 'portals'%>
                          <li><%= link_to "Flag", flagged_program_path(@program), :id => "flagged" %></li>
                        <% end %>

                      </ul>
                      </li>
                    <%end%>
                  <%end%>
                    <li><%=link_to "Contacts", reviews_emergency_path(), :id => "contacts" %></li>
                  <% if logged_in? %>
                    <%if current_user.avatar.attached?%>
                      <li class="navigation-user-icon"><a href=""><%= image_tag(current_user.avatar, class: "img-circle", height: '50', width: '50') %></a>
                        <ul>
                          <% if User.exists?(current_user.id) %>
                          <li><%= link_to "Profile", user_path(current_user), :id => "profile" %></li>
                          <% end %>
                          <li><%=link_to "Logout", logout_path(), :id => "logout" %></li>
                        </ul>
                      </li>
                    <% else %>
                    <li class="navigation-user-icon"><a href=""><%= image_tag(asset_path("profile.jpg"), class: "img-circle", height: '50', width: '50') %></a>
                        <ul>
                          <% if User.exists?(current_user.id) %>
                          <li><%= link_to "Profile", user_path(current_user), :id => "profile" %></li>
                          <% end %> 
                          <li><%=link_to "Logout", logout_path(), :id => "logout" %></li>
                        </ul>
                      </li>
                    <%end%>
                  <%else%>
                    <li><%=link_to "Sign In", "/auth/google_oauth2", method: :get %></li>
                  <%end%>
                </ul>
              </div>
           

        <!-- Mobile Drop Down Menu -->
        <div class="container overlay">
             <!-- Mobile Menu - only visable under 750px width-->
            <button class="navbar-toggle pull-right  menu-button" type="button" data-toggle="collapse" data-target="#dropdown-menu">
                <i class="material-icons b"> menu </i>
            </button>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse container" id="dropdown-menu">
                <ul class="m">
                    <li> <%=link_to "CONTACT", reviews_emergency_path(), :id => "contact_mobile", :class => "dropdown-item"%> </li>
                    <% if logged_in? %>
                        <li> <%=link_to "LOGOUT", logout_path(), :id => "logout", :class => "link dropdown-item"%> </li> 
                    <%else%>
                       <li> <%=link_to "LOGIN", login_path(), :id => "login_mobile", :class => "link dropdown-item"%> </li>
                    <%end%>
                    
                </ul>
            </div>
        </div>
    </nav>
    <% if flash[:notice] %>
      <%= content_tag :div, flash["notice"], class: "flash-notice" %>
    <% end %>
    <% if flash[:warning] %>
      <%= content_tag :div, flash["warning"], class: "flash-warning" %>
    <% end %>
    <% if flash[:alert] %>
      <div class="flash-alert-wrapper"><div class="flash-alert"><div class="flash-alert-header">Error</div><div class="flash-alert-message"><%= flash[:alert] %></div><div class="flash-alert-button"><input type="button" value="Got it!"></div></div></div>
    <% end %>
    <%= yield %>
      <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  </body>
</html>
